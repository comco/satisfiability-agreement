% Hardness with many equivalences in refinement
The argument from the previous section can be iterated to yield the hardness of
the (finite) satisfiability of the monadic first-order logic with several
builtin equivalence symbols in refinement $\Lvp\Fo\nonv1\Eea\sze\agrefine$.

\begin{definition}
An $\sze$-exponential $\nn$-bit counter setup $\DS_\nn^\sze$ is a monadic
predicate signature consisting of $\poly\nn$-many unary predicate symbols and of
the builtin equivalence symbols $\see1,\see2,\dots,\see\sze$ in refinement,
together with the following function and formulas. Abbreviate the coarsest
equivalence symbol $\sd = \see\sze$.
\begin{enumerate}
  \item If $\StrA$ is a $\DS$-structure and $\relD = \at\StrA\sd$, then we have
  a function $\eData\sze\DS\StrA : \Ecl\relD \to [0, \tetr\sze2\nn - 1]$ that
  assigns an $\sze$-exponential number to every $\relD$-class in $\StrA$.
  \item There is a $\vFoF3\DS$-formula $\feeqData\sze\DS(\xx,\yy)$ of
  $\poly\nn$-length such that for all $\ea,\eb \in \domA$:
  \[
    \miff{
      \StrA \vDash \feeqData\sze\DS(\ea,\eb)}{
      \eData\sze\DS\StrA\relD[\ea] = \eData\sze\DS\StrA\relD[\eb]}.
  \]
  \item There is a $\vFoF3\DS$-formula $\feZero\sze\DS(\xx)$ of
  $\poly\nn$-length such that for all $\ea \in \domA$:
  \[
    \miff{
      \StrA \vDash \feZero\sze\DS(\ea)}{
      \eData\sze\DS\StrA\relD[\ea] = 0}.
  \]
  \item There is a $\vFoF3\DS$-formula $\feMax\sze\DS(\xx)$ of
  $\poly\nn$-length such that for all $\ea \in \domA$:
  \[
    \miff{
      \StrA \vDash \feMax\sze\DS(\ea)}{
      \eData\sze\DS\StrA\relD[\ea] = \tetr\sze2\nn - 1}.
  \]
  \item There is a $\vFoF3\DS$-formula $\feLess\sze\DS(\xx,\yy)$ of
  $\poly\nn$-length such that for all $\ea, \eb \in \domA$:
  \[
    \miff{
      \StrA \vDash \feLess\sze\DS(\ea,\eb)}{
      \eData\sze\DS\StrA\relD[\ea] < \eData\sze\DS\StrA\relD[\eb]}.
  \]
  \item There is a $\vFoF3\DS$-formula $\feSucc\sze\DS(\xx,\yy)$ of
  $\poly\nn$-length such that for all $\ea, \eb \in \domA$:
  \[
    \miff{
      \StrA \vDash \feSucc\sze\DS(\ea,\eb)}{
      \eData\sze\DS\StrA\relD[\eb] = \eData\sze\DS\StrA\relD[\ea] + 1}.
  \]
  % TODO: make this more precise
  \item For every $\posp \in [0, \tetr\sze2\nn - 1]$, there is a
  $\vFoF3\DS$-formula $\feEq\sze\posp\DS(\xx)$ of length that is $\poly\nn$
  if the bitsize of $\posp$ is $\poly\nn$, such that for all $\ea \in  \domA$:
  \[
    \miff{
      \StrA \vDash \feEq\sze\posp\DS(\ea)}{
      \eData\sze\DS\StrA\relD[\ea] = \posp}.
  \]
  
\end{enumerate}
\end{definition}
We can employ an $\sze$-exponential $\nn$-bit counter setup to construct an
$(\sze+1)$-exponential $\nn$-bit counter setup by introducing a new coarsest
builtin equivalence symbol $\se = \see{\sze+1}$ and a new control unary
predicate symbol $\sco$, similarly to what we did in~\Cref{sec:hardness-one}:
the $\relD$-classes within a single $\relE$-class correspond to the
$\sze$-exponential bit positions of a $(\sze+1)$-exponential number---the
$(\sze+1)$-exponential data at the $\relE$-class. If there is a single
$\relD$-class at position $\posp$ in a $\relE$-class, the bit at that position
is $0$; if there are more $\relD$-classes at position $\posp$, the bit at that
position is $1$, so we may define the formulas:
\[
  \fbitO{\DS_\nn^{\sze+1}}(\xx) = \sco(\xx) \land \forall\yy \sco(\yy) \land
  \se(\yy,\xx) \land \feeqData\sze\DS(\yy,\xx) \limp \yy = \xx, \text{etc.}
\]
Repeating the argument from section~\Cref{sec:hardness-one}, by reducing the
$\ceNExpTime\sze$-complete $\sze$-exponential tiling problem to (finite)
satisfiability of $\Lvp\Fo\nonv1\Eea\sze\agrefine$, we obtain:
\begin{proposition}
The (finite) satisfiability problem for the monadic first-order logic with
$\sze \in \pNats$ equivalence symbols in refinement
$\Lvp\Fo\nonv1\Eea\sze\agrefine$ is $\ceNExpTime{(\sze+1)}$-hard.
By \Cref{prop:global-to-refine-n} and \Cref{prop:local-to-refine-n}, the same
holds for the logics $\Lvp\Fo\nonv1\Eea\sze\agglobal$ and
$\Lvp\Fo\nonv1\Eea\sze\aglocal$.
\end{proposition}

\begin{proposition}
The (finite) satisfiability problem for the monadic first-order logic with many
equivalence symbols in refinement $\Lvp\Fo\nonv1\Eea\nosze\agrefine$ is
$\cElementary$-hard.

By \Cref{prop:global-to-refine} and \Cref{prop:local-to-refine}, the same claim
holds for the logics $\Lvp\Fo\nonv1\Eea\nosze\agglobal$ and
$\Lvp\Fo\nonv1\Eea\nosze\aglocal$.
\end{proposition}